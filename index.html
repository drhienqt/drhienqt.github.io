<!DOCTYPE html>
<html lang="vi">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6BR46GX2XS"></script>
<script defer src="/assets/mxd-affiliate.js"></script>
<script defer src="/assets/mxd-config.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6BR46GX2XS');
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HÂN STORE | Trang Chủ</title>
  <link rel="stylesheet" href="styles/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <img id="banner-img" src="assets/img/banner.png" alt="Banner HÂN STORE" style="width:100%; height:auto;">
  </header>

  <nav>
    <a href="index.html">Trang chủ</a>
    <a href="sanpham.html">Sản phẩm</a>
    <a href="huongdan.html">Hướng dẫn</a>
    <a href="about.html">Về chúng tôi</a>
    <a href="lienhe.html">Liên hệ</a>
  </nav>

  <section class="hero">
    <div class="hero-text">
      <h1>Khám phá phong cách sống hiện đại cùng HÂN STORE</h1>
      <p>Đồ gia dụng thông minh – giải pháp tiện nghi cho mọi không gian sống.</p>
    </div>
  </section>

  <section class="categories">
    <h2>Danh mục nổi bật</h2>
    <div class="category-tabs">
      <a class="category" href="dodung.html"><img src="images/icons/dodung.png"><p>Đồ gia dụng</p></a>
      <a class="category" href="phukien.html"><img src="images/icons/phukien.png"><p>Phụ kiện thông minh</p></a>
      <a class="category" href="thoitrang.html"><img src="images/icons/thoitrang.png"><p>Thời trang</p></a>
      <a class="category" href="mevabe.html"><img src="images/icons/mevabe.png"><p>Mẹ và Bé</p></a>
      <a class="category" href="hottrend.html"><img src="images/icons/hottrend.png"><p>Hot Trend</p></a>
      <a class="category" href="lamdep.html"><img src="images/icons/lamdep.png"><p>Làm đẹp</p></a>
    </div>
  </section>

  <section class="products" id="product-list"></section>

  <div style="text-align:center; margin: 20px 0;">
    <button id="open-picker" class="btn">+ Thêm sản phẩm nổi bật</button>
  </div>

  <div id="picker-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Chọn sản phẩm để thêm vào danh sách nổi bật</h3>
        <button id="close-picker" class="close">✕</button>
      </div>
      <div class="modal-search">
        <input id="search-input" placeholder="Tìm kiếm tên sản phẩm..." />
      </div>
      <div id="picker-list" class="picker-list"></div>
    </div>
  </div>

  <footer>
    <p>© 2025 HÂN STORE - All rights reserved.</p>
  </footer>

  <div class="social-buttons">
    <a href="https://zalo.me/0363293396" target="_blank" title="Zalo"><img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Icon_of_Zalo.svg" alt="Zalo" width="22" /></a>
    <a href="https://facebook.com/drhienqt" target="_blank" title="Facebook"><img src="assets/img/Facebook_Logo_2023.png" alt="Facebook" width="22" /><i class="fab fa-facebook-f"></i></a>
    <a href="hanstore@gmail.com" title="Email"><img src="assets/img/Android_Email_4.4_Icon.png" alt="Email" width="22" /><i class="fas fa-envelope"></i></a>
  </div>
</body>
</html>
--- styles/style.css ---

body { font-family: 'Poppins', sans-serif; margin:0; padding:0; }
nav a { margin:0 10px; text-decoration:none; color:#023e8a; font-weight:600; }
.hero { position:relative; text-align:center; color:white; background:#0096c7; padding:50px 20px; }
.categories, .products { padding:20px; }
.category-tabs { display:flex; flex-wrap:wrap; gap:15px; }
.category { text-align:center; text-decoration:none; color:#023e8a; }
.category img { width:60px; height:60px; display:block; margin:0 auto 5px; }
.products .product { border:1px solid #ccc; padding:10px; margin-bottom:15px; text-align:center; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
.modal-content { background:#fff; padding:20px; width:90%; max-width:600px; border-radius:10px; }
.picker-card { display:flex; gap:10px; border-bottom:1px solid #ddd; padding:10px; align-items:center; }
.picker-card img { width:80px; height:80px; object-fit:cover; }
.modal-search input { width:100%; padding:8px; margin-bottom:10px; }
.social-buttons { position:fixed; bottom:20px; right:20px; display:flex; flex-direction:column; gap:10px; }
.social-buttons a img { width:40px; height:40px; }

--- scripts/main.js ---

const PRODUCTS_JSON = 'products.json';
const featuredKey = 'hanstore_featured';

let allProducts = [];
let featuredIds = JSON.parse(localStorage.getItem(featuredKey) || '[]');

async function loadProducts() {
  try {
    const res = await fetch(PRODUCTS_JSON, { headers: { 'Content-Type': 'application/json' } });
    if (!res.ok) throw new Error('Network response was not ok');
    allProducts = await res.json();
  } catch (e) {
    console.error('Không thể load products.json, sử dụng dữ liệu mẫu', e);
    allProducts = [];
  }
}

function renderFeatured() {
  const container = document.getElementById('product-list');
  container.innerHTML = '';
  const featured = allProducts.filter(p => featuredIds.includes(p.id));
  if (featured.length === 0) {
    container.innerHTML = '<p style="width:100%; text-align:center; color:#023e8a; font-weight:600;">Chưa có sản phẩm nổi bật. Nhấn "+ Thêm sản phẩm nổi bật" để chọn.</p>';
    return;
  }
  featured.forEach(p => {
    const el = document.createElement('div');
    el.className = 'product';
    el.innerHTML = `
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>${p.price}</p>
      <a href="${p.link}" target="_blank" rel="noopener noreferrer">Tìm hiểu thêm</a>
      <div style="margin-top:8px;"><button class="remove-btn" data-id="${p.id}">Xoá</button></div>
    `;
    container.appendChild(el);
  });

  document.querySelectorAll('.remove-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = Number(btn.dataset.id);
      featuredIds = featuredIds.filter(x => x !== id);
      localStorage.setItem(featuredKey, JSON.stringify(featuredIds));
      renderFeatured();
    });
  });
}

function openPicker() {
  document.getElementById('picker-modal').style.display = 'flex';
  renderPicker(allProducts);
  document.getElementById('search-input').focus();
}

function closePicker() {
  document.getElementById('picker-modal').style.display = 'none';
}

function renderPicker(list) {
  const picker = document.getElementById('picker-list');
  picker.innerHTML = '';
  list.forEach(p => {
    const card = document.createElement('div');
    card.className = 'picker-card';
    const already = featuredIds.includes(p.id);
    card.innerHTML = `
      <img src="${p.image}" alt="${p.name}">
      <div class="info">
        <h4>${p.name}</h4>
        <p>${p.price}</p>
      </div>
      <div class="action">
        <button class="select-btn" data-id="${p.id}" ${already ? 'disabled' : ''}>${already ? 'Đã thêm' : 'Chọn sản phẩm này'}</button>
      </div>
    `;
    picker.appendChild(card);
  });

  picker.querySelectorAll('.select-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = Number(btn.dataset.id);
      if (!featuredIds.includes(id)) featuredIds.push(id);
      localStorage.setItem(featuredKey, JSON.stringify(featuredIds));
      renderFeatured();
      renderPicker(allProducts);
    });
  });
}

document.getElementById('open-picker').addEventListener('click', openPicker);
document.getElementById('close-picker').addEventListener('click', closePicker);
document.getElementById('search-input').addEventListener('input', (e) => {
  const q = e.target.value
